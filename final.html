<!DOCTYPE html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>OperaciÃ³n Eficiencia â€” Resultado Final</title>
<link rel="stylesheet" href="estilos.css">
</head>
<body>
<main class="container">
<header>
<h1>ğŸ† Resultado Final</h1>
</header>


<section class="card" id="resultadoCard">
<p id="resultado"></p>
<canvas id="certificado" width="800" height="500"></canvas>
<div class="actions">
<button id="descargar" class="btn">Descargar Certificado</button>
<button id="volver" class="btn ghost">Volver al inicio</button>
</div>
</section>


<footer class="muted">Gracias por jugar â€” Â¡lleva lo aprendido al taller!</footer>
</main>


<script>
function cargarResumen() {
const resumen = JSON.parse(localStorage.getItem('oe_resumen') || 'null');
const puntos = parseInt(localStorage.getItem('oe_puntos') || '0');
const rol = localStorage.getItem('rol') || 'Sin rol';


let nivelText = '';
if (puntos >= 90) nivelText = 'CinturÃ³n Negro Lean';
else if (puntos >= 75) nivelText = 'CinturÃ³n Verde';
else if (puntos >= 60) nivelText = 'Aprendiz Lean';
else nivelText = 'Modo Sobrevivencia';


document.getElementById('resultado').textContent = `Rol: ${rol} â€” Puntos: ${puntos} â€” ${nivelText}`;


// dibujar certificado simple
const canvas = document.getElementById('certificado');
const ctx = canvas.getContext('2d');
ctx.fillStyle = '#fff'; ctx.fillRect(0,0,canvas.width,canvas.height);
ctx.fillStyle = '#002c4a'; ctx.font = '32px Arial'; ctx.fillText('Certificado Lean', 260, 80);
ctx.font = '20px Arial'; ctx.fillText(`Jugador: ${rol}`, 80, 180);
ctx.fillText(`Puntos: ${puntos}`, 80, 230);
ctx.fillText(`Resultado: ${nivelText}`, 80, 280);
ctx.font = '14px Arial'; ctx.fillText('OperaciÃ³n Eficiencia â€” FÃ¡brica Futura S.A.', 80, 340);
}


window.onload = function(){
cargarResumen();
document.getElementById('descargar').addEventListener('click', ()=>{
const canvas = document.getElementById('certificado');
const link = document.createElement('a');
link.download = 'certificado_lean.png';
link.href = canvas.toDataURL();
link.click();
});
document.getElementById('volver').addEventListener('click', ()=>{ window.location.href='index.html'; });
};
</script>
</body>
</html>
